"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var m,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,m=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw m}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var loading_pic,requests_url="https://pyq.ranas.cn/api",orign_data=[],maxnumber=20,addnumber=10,opentype="_blank",nofollow=!0,loadingCutom="";document.getElementById("moments_container")&&((loading_pic=document.getElementById("moments_container")).innerHTML=void 0===loadingCutom||null==loadingCutom||""===loadingCutom?'<style>.loader { color: #d9dad8; font-size: 90px; text-indent: -9999em; overflow: hidden; width: 1em; height: 1em; border-radius: 50%; margin: 72px auto; position: relative; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load6 1.7s infinite ease, round 1.7s infinite ease; animation: load6 1.7s infinite ease, round 1.7s infinite ease; } @-webkit-keyframes load6 { 0% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 5%, 95% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 10%, 59% { box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em; } 20% { box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em; } 38% { box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em; } 100% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } } @keyframes load6 { 0% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 5%, 95% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 10%, 59% { box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em; } 20% { box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em; } 38% { box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em; } 100% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } } @-webkit-keyframes round { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes round { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }</style><center><span id="moments_loading"><div class="loader"></div></span></center>':'<center><span id="moments_loading">'+loadingCutom+"</span></center>",fetch(requests_url).then(function(e){return e.json()}).then(function(e){data_handle(nofollow,orign_data=e,maxnumber)}));var data_handle=function(e,t,n){for(var o=todaypost(),m=new Date(o),a=0;a<t[1].length;a++)m<new Date(t[1][a][1])&&t[1].splice(a--,1);var r,i=0,s=0,l=t[1].slice(0,n),d=t[1].length,c=t[0].length,p=slice_month(l),f=timezoon(p),u=[],g=_createForOfIteratorHelper(t[1]);try{for(g.s();!(r=g.n()).done;)(a=r.value)[1]===o&&(i+=1),u.push(a[3])}catch(e){g.e(e)}finally{g.f()}var _,l=unique(u).length,h=_createForOfIteratorHelper(t[0]);try{for(h.s();!(_=h.n()).done;)"true"===(a=_.value)[3]&&(s+=1)}catch(e){h.e(e)}finally{h.f()}var b="";b+='<div id="info_user_pool" class="moments-item info_user_pool" style="">',b+='<div class="moments_chart"><span class="moments_post_info_title">当前友链数：</span><span class="moments_post_info_number">'+c+' 个</span><br><span class="moments_post_info_title">失败数：</span><span class="moments_post_info_number">'+s+" 个</span><br></div>",b+='<div class="moments_chart"><span class="moments_post_info_title">活跃友链数：</span><span class="moments_post_info_number">'+l+' 个</span><br><span class="moments_post_info_title">当前库存：</span><span class="moments_post_info_number">'+d+" 篇</span><br></div>",b+='<div class="moments_chart"><span class="moments_post_info_title">今日更新：</span><span class="moments_post_info_number">'+i+' 篇</span><br><span class="moments_post_info_title">最近更新：</span><span class="moments_post_info_number">'+f+"</span><br></div>",b+="</div>";var x,y=_createForOfIteratorHelper(p);try{for(y.s();!(x=y.n()).done;){var v,w=_createForOfIteratorHelper(x.value[1]);try{for(w.s();!(v=w.n()).done;){var k=v.value,I="",I=e&&"_blank"==opentype?"noopener nofollow":e?"nofollow":"_blank"==opentype?"noopener":"";b+=' <div class="moments-item">',b+=' <a target="'+opentype+'" class="moments-item-img" href="'+k[2]+'" title="'+k[0]+'"rel="'+I+'">',b+='<img onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/Zfour/Butterfly-friend-poor-html/friendcircle/404.png&quot;"',b+=' src="'+k[4]+'"></a>',b+='<div class="moments-item-info"><div class="moments-item-time"><i class="far fa-user"></i>',b+="<span>"+k[3]+"</span>",b+=' <div class="moments_post_time"><i class="far fa-calendar-alt"></i><time datetime="'+k[1]+'" title="'+k[1]+'">'+k[1]+"</time></div>",b+='</div><a target="'.concat(opentype,'" class="moments-item-title" href="').concat(k[2],'" title="').concat(k[0],'"rel="').concat(I,'">').concat(k[0],"</a></div>"),b+="</div>"}}catch(e){w.e(e)}finally{w.f()}}}catch(e){y.e(e)}finally{y.f()}0<t[1].length-n&&(b+='<div style="text-align: center"><button type="button" class="moments_load_button" onclick="load_more_post()">加载更多...</button></div>'),b+="<style>.moments-item-info span{padding-left:.3rem;padding-right:.3rem}.moments_post_time time{padding-left:.3rem;cursor:default}.moments_post_info_title{font-weight:700}.moments_post_info_number{float:right}.moments_chart{align-items:flex-start;flex:1;width:100px;height:60px;margin:20px}@media screen and (max-width:500px){.info_user_pool{padding:10px;flex-direction:column;max-height:200px}.moments_chart{flex:0;width:100%;height:160px;margin:0}}.moments-item:before{border:0}@media screen and (min-width:500px){.moments_post_time{float:right}}.moments_load_button{-webkit-transition-duration:.4s;transition-duration:.4s;text-align:center;border:1px solid #ededed;border-radius:.3em;display:inline-block;background:transparent;color:#555;padding:.5em 1.25em}.moments_load_button:hover{color:#3090e4;border-color:#3090e4}.moments-item{position:relative;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;-o-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center;margin:0 0 1rem .5rem;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-shadow:rgba(0,0,0,0.07) 0 2px 2px 0,rgba(0,0,0,0.1) 0 1px 5px 0;border-radius:2px}.moments-item-img{overflow:hidden;width:80px;height:80px}.moments-item-img img{max-width:100%;width:100%;height:100%;object-fit:cover}.moments-item-info{-webkit-box-flex:1;-moz-box-flex:1;-o-box-flex:1;box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding:0 .8rem}.moments-item-title{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;font-size:1.1em;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;-ms-transition:all .3s;transition:all .3s;-webkit-line-clamp:1}</style>";n=document.getElementById("moments_container");append_div(n,b)},load_more_post=function(){document.getElementById("moments_container")&&(maxnumber+=addnumber,document.getElementById("moments_container").innerHTML="",data_handle(nofollow,orign_data,maxnumber))},append_div=function(e,t){if(document.getElementById("moments_container")&&(loading_pic.innerHTML=""),"string"==typeof t){var n=document.createElement("div");n.innerHTML=t;for(var o=document.createDocumentFragment();n.firstChild;)o.appendChild(n.firstChild);e.appendChild(o)}else e.appendChild(t)},unique=function(e){return Array.from(new Set(e))},formatDate=function(e){try{var t=new Date(Date.parse(e.replace(/-/g,"/"))),n=(new Date).getTimezoneOffset()?(new Date).getTimezoneOffset():8,o=60*n*1e3,m=t.getTime(),a=new Date(m-o),r=a.getSeconds().toString(),i=a.getMinutes().toString();return 1===r.length&&(r="0"+r),1===i.length&&(i="0"+i),a.getFullYear().toString()+"/"+(a.getMonth()+1).toString()+"/"+a.getDate().toString()+" "+a.getHours().toString()+":"+i+":"+r}catch(e){return""}},timezoon=function(e){e=e[0][1][0][5];return formatDate(e)},todaypost=function(){var e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString(),e=e.getDate().toString();return t+"-"+(n=1===n.length?"0"+n:n)+"-"+(e=1===e.length?"0"+e:e)},slice_month=function(e){var t,n=[],o=[],m=e;for(t in m){m[t].push(t),10!==m[t][1].lenth&&((a=m[t][1].split("-"))[1].length<2&&(a[1]="0"+a[1]),a[2].length<2&&(a[2]="0"+a[2]),m[t][1]=a.join("-"));var a=m[t][1].slice(0,7);-1!==n.indexOf(a)?o[n.length-1][1].push(m[t]):(n.push(a),o.push([a,[m[t]]]))}for(var r=0,i=o;r<i.length;r++){var s=i[r];s.push(s[1][0][6])}return o};